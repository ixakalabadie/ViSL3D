<!DOCTYPE html>
	 <head>
		<script type='text/javascript' src='x3dom/x3dom.js'></script>
		<script type='text/javascript'  src='https://www.maths.nottingham.ac.uk/plp/pmadw/LaTeXMathML.js'></script>
		<link rel='stylesheet' type='text/css' href='x3dom/x3dom.css'></link>
		<script type='text/javascript' src='https://code.jquery.com/jquery-3.6.3.min.js'></script>
		<script src="x3dom/js-colormaps.js"></script> <!-- FOR COLORMAPS IN JS-->
		<script type="text/javascript" src="x3dom/markers.js"></script> <!-- FOR MARKERS IN JS-->
		{% if interface != 'minimal' %}
		<title> {{name}} </title>

		<style>
			x3d
				{
					border:2px solid darkorange;
					width:95vw;
					height: 75vh;
			}
			</style>
		{% else %}
		<style>
			x3d
				{
					border:2px solid darkorange;
					width:100vw;
					height: 100vh;
			}
			</style>
		{% endif %}
	</head>

	<body>
	<h1 align="middle"> {{pagetitle}} </h1>
	<hr/>
	{% if description %}
	<p> {{description}} </p>
	{% endif %}
	
	<script>
		 //Round a float value to x.xx format
		function roundTo(value, decimals)
		{
			return (Math.round(value * 10**decimals)) / 10**decimals;
		 }
	</script>

	<script>
		function hideall0() {
			{% for i in range(5) %}
			setHI0layer0();
			setHI0layer1();
			setHI0layer2();
			setHI0layer3();
			setHI0layer4();
		}
	</script>
	 <script>
	 	 function setHI0layer0()
	 	 {
	 	 if(document.getElementById('cube__0layer0_sp0').getAttribute('transparency') != '0.8') {
		 document.getElementById('0but0').style.border = '5px dashed black';
		 document.getElementById('cube__0layer0_sp0').setAttribute('transparency', '0.8');
		 document.getElementById('cube__0layer0_sp0_shape').setAttribute('ispickable', 'true');
		 } else { 
		 document.getElementById('0but0').style.border = 'inset black';
		 document.getElementById('cube__0layer0_sp0').setAttribute('transparency', '1');
		 document.getElementById('cube__0layer0_sp0_shape').setAttribute('ispickable', 'false');
		 } 
		 }
	 </script>
	 <script>
	 	 function setHI0layer1()
	 	 {
	 	 if(document.getElementById('cube__0layer1_sp0').getAttribute('transparency') != '0.8') {
		 document.getElementById('0but1').style.border = '5px dashed black';
		 document.getElementById('cube__0layer1_sp0').setAttribute('transparency', '0.8');
		 document.getElementById('cube__0layer1_sp0_shape').setAttribute('ispickable', 'true');
		 } else { 
		 document.getElementById('0but1').style.border = 'inset black';
		 document.getElementById('cube__0layer1_sp0').setAttribute('transparency', '1');
		 document.getElementById('cube__0layer1_sp0_shape').setAttribute('ispickable', 'false');
		 } 
		 }
	 </script>
	 <script>
	 	 function setHI0layer2()
	 	 {
	 	 if(document.getElementById('cube__0layer2_sp0').getAttribute('transparency') != '0.8') {
		 document.getElementById('0but2').style.border = '5px dashed black';
		 document.getElementById('cube__0layer2_sp0').setAttribute('transparency', '0.8');
		 document.getElementById('cube__0layer2_sp0_shape').setAttribute('ispickable', 'true');
		 } else { 
		 document.getElementById('0but2').style.border = 'inset black';
		 document.getElementById('cube__0layer2_sp0').setAttribute('transparency', '1');
		 document.getElementById('cube__0layer2_sp0_shape').setAttribute('ispickable', 'false');
		 } 
		 }
	 </script>
	 <script>
	 	 function setHI0layer3()
	 	 {
	 	 if(document.getElementById('cube__0layer3_sp0').getAttribute('transparency') != '0.8') {
		 document.getElementById('0but3').style.border = '5px dashed black';
		 document.getElementById('cube__0layer3_sp0').setAttribute('transparency', '0.8');
		 document.getElementById('cube__0layer3_sp0_shape').setAttribute('ispickable', 'true');
		 } else { 
		 document.getElementById('0but3').style.border = 'inset black';
		 document.getElementById('cube__0layer3_sp0').setAttribute('transparency', '1');
		 document.getElementById('cube__0layer3_sp0_shape').setAttribute('ispickable', 'false');
		 } 
		 }
	 </script>
	 <script>
		 function setHI0layer4()
		 {
	 	 if(document.getElementById('cube__0layer4_sp0').getAttribute('transparency') != '0.4') {
		 document.getElementById('0but4').style.border = '5px dashed black';
		 document.getElementById('cube__0layer4_sp0').setAttribute('transparency', '0.4');
		 document.getElementById('cube__0layer4_sp0_shape').setAttribute('ispickable', 'true');
		 } else { 
		 document.getElementById('0but4').style.border = 'inset black';
		 document.getElementById('cube__0layer4_sp0').setAttribute('transparency', '1');
		 document.getElementById('cube__0layer4_sp0_shape').setAttribute('ispickable', 'false');
		 } 
		 }
	 </script>
	 	 <script>
	 	 function setgals()
	 	 {
	 	 if(document.getElementById('cube__HCG16a').getAttribute('transparency')!= '0'){
	 	 document.getElementById('cube__HCG16a').setAttribute('transparency', '0');
	 	 document.getElementById('cube__HCG16b').setAttribute('transparency', '0');
	 	 document.getElementById('cube__HCG16c').setAttribute('transparency', '0');
	 	 document.getElementById('cube__HCG16d').setAttribute('transparency', '0');
	 	 document.getElementById('cube__NCG848').setAttribute('transparency', '0');
	 	 }
	 	 else {
	 	 document.getElementById('cube__HCG16a').setAttribute('transparency', '1');
	 	 document.getElementById('cube__HCG16b').setAttribute('transparency', '1');
	 	 document.getElementById('cube__HCG16c').setAttribute('transparency', '1');
	 	 document.getElementById('cube__HCG16d').setAttribute('transparency', '1');
	 	 document.getElementById('cube__NCG848').setAttribute('transparency', '1');
		 }
		 }
		 </script>
		 <script>
	 	 function setgallabels()
	 	 {
	 	 if(document.getElementById('cube__label_HCG16a').getAttribute('transparency')!= '0'){
	 	 document.getElementById('cube__label_HCG16a').setAttribute('transparency', '0');
	 	 document.getElementById('cube__label_HCG16b').setAttribute('transparency', '0');
	 	 document.getElementById('cube__label_HCG16c').setAttribute('transparency', '0');
	 	 document.getElementById('cube__label_HCG16d').setAttribute('transparency', '0');
	 	 document.getElementById('cube__label_NCG848').setAttribute('transparency', '0');
	 	 }
	 	 else {
	 	 document.getElementById('cube__label_HCG16a').setAttribute('transparency', '1');
	 	 document.getElementById('cube__label_HCG16b').setAttribute('transparency', '1');
	 	 document.getElementById('cube__label_HCG16c').setAttribute('transparency', '1');
	 	 document.getElementById('cube__label_HCG16d').setAttribute('transparency', '1');
	 	 document.getElementById('cube__label_NCG848').setAttribute('transparency', '1');
		 }
		 }
		 </script>
		<script>
		function setgrids()
		{
			if(document.getElementById('cube__ticklines').getAttribute('transparency') == '0') {
				document.getElementById('cube__ticklines').setAttribute('transparency', '1');
			} else if (document.getElementById('cube__outline').getAttribute('transparency') == '0') {
				document.getElementById('cube__outline').setAttribute('transparency', '1');
			} else {
				document.getElementById('cube__ticklines').setAttribute('transparency', '0');
				document.getElementById('cube__outline').setAttribute('transparency', '0');
			}
		}
		 </script>
		<script>
		function setaxes()
		{
		if(document.getElementById('cube__axlab_diff1').getAttribute('transparency') == '0') {
			for (i=0; i<12; i++) {
			if (i<6) {
				document.getElementById('cube__axlab_diff'+i).setAttribute('transparency', '1');
				document.getElementById('cube__axlab_real'+i).setAttribute('transparency', '0');
			}
				document.getElementById('cube__axtick_diff'+i).setAttribute('transparency', '1');
				document.getElementById('cube__axtick_real'+i).setAttribute('transparency', '0');
			}
		}
		else if (document.getElementById('cube__axlab_real1').getAttribute('transparency') == '0') {
			for (i=0; i<12; i++) {
			if (i<6) {
				document.getElementById('cube__axlab_real'+i).setAttribute('transparency', '1');
			}
				document.getElementById('cube__axtick_real'+i).setAttribute('transparency', '1');
			}
		}
		else {
			for (i=0; i<12; i++) {
			if (i<6) {
				document.getElementById('cube__axlab_diff'+i).setAttribute('transparency', '0');
			}
				document.getElementById('cube__axtick_diff'+i).setAttribute('transparency', '0');
			}
		 }
		 }
		 </script>

	<script>
		var active = false;
		function animation() {
			if (active == false) {
				document.getElementById('cube__time').setAttribute('startTime', document.getElementById('cube__time').getAttribute('time'));
				document.getElementById('cube__time').setAttribute('isPaused', 'false');
				active = true;
			} else if (document.getElementById('cube__time').getAttribute('isPaused') == 'false') {
				document.getElementById('cube__time').setAttribute('loop', 'false');
				document.getElementById('cube__time').setAttribute('isPaused', 'true')
			} else {
				document.getElementById('cube__time').setAttribute('loop', 'true');
				document.getElementById('cube__time').setAttribute('isPaused', 'false');
			}
		}
	</script>
		<script>
			function settube() {
				if(document.getElementById('cube__py0tubmat0').getAttribute('transparency') != '0') {
					document.getElementById('cube__py0tubmat0').setAttribute('transparency', '0');
					document.getElementById('cube__py1tubmat0').setAttribute('transparency', '0');
					document.getElementById('cube__py1tubmat1').setAttribute('transparency', '0');
				} else {
					document.getElementById('cube__py0tubmat0').setAttribute('transparency', '1');
					document.getElementById('cube__py1tubmat0').setAttribute('transparency', '1');
					document.getElementById('cube__py1tubmat1').setAttribute('transparency', '1');
				}
			}
			function setsphere() {
				if(document.getElementById('cube__py0sphmat').getAttribute('transparency') != '0') {
					document.getElementById('cube__py0sphmat').setAttribute('transparency', '0');
					document.getElementById('cube__py1sphmat').setAttribute('transparency', '0');
				} else {
					document.getElementById('cube__py0sphmat').setAttribute('transparency', '1');
					document.getElementById('cube__py1sphmat').setAttribute('transparency', '1');
				}
			}
			function setbox() {
				if(document.getElementById('cube__py0boxmat').getAttribute('transparency') != '0') {
					document.getElementById('cube__py0boxmat').setAttribute('transparency', '0');
					document.getElementById('cube__py1boxmat').setAttribute('transparency', '0');
				} else {
					document.getElementById('cube__py0boxmat').setAttribute('transparency', '1');
					document.getElementById('cube__py1boxmat').setAttribute('transparency', '1');
				}
			}
			function setcone() {
				if(document.getElementById('cube__py0conmat').getAttribute('transparency') != '0') {
					document.getElementById('cube__py0conmat').setAttribute('transparency', '0');
					document.getElementById('cube__py1conmat').setAttribute('transparency', '0');
				} else {
					document.getElementById('cube__py0conmat').setAttribute('transparency', '1');
					document.getElementById('cube__py1conmat').setAttribute('transparency', '1');
				}
			}
		</script>
	<center><x3d id='cubeFixed'>
		<scene>
			<OrthoViewpoint id="front" bind='false' centerOfRotation='0,0,0' description='RA-Dec view' fieldOfView='[-1400.0,-1400.0,1400.0,1400.0]' isActive='false' metadata='X3DMetadataObject' orientation='0,1,0,3.141593' position='0,0,-5500' zFar='11000' zNear='0.0001' ></OrthoViewpoint>
			<OrthoViewpoint id="side" bind='false' centerOfRotation='0,0,0' description='Z - Dec view' fieldOfView='[-1400.0,-1400.0,1400.0,1400.0]' isActive='false' metadata='X3DMetadataObject' orientation='0,-1,0,1.570796' position='-5500,0,0' zFar='11000' zNear='0.0001' ></OrthoViewpoint>
			<OrthoViewpoint id="side2" bind='false' centerOfRotation='0,0,0' description='Z - RA view' fieldOfView='[-1400.0,-1400.0,1400.0,1400.0]' isActive='false' metadata='X3DMetadataObject' orientation='1,1,1,4.1888' position='0,5500,0' zFar='11000' zNear='0.0001' ></OrthoViewpoint>
			<OrthoViewpoint id='vp0' bind='false' centerOfRotation='0,0,0' description='vp0' fieldOfView='[-1400.0,-1400.0,1400.0,1400.0]' isActive='false' orientation='0.57735027 0.57735027 0.57735027 0.78539816' position=' 2782.3345 -1708.3935  4426.059 ' zFar='11000' zNear='0.0001' ></OrthoViewpoint>
			<OrthoViewpoint id='vp1' bind='false' centerOfRotation='0,0,0' description='vp1' fieldOfView='[-1400.0,-1400.0,1400.0,1400.0]' isActive='false' orientation='-0.89442719  0.4472136   0.          2.67794504' position=' 1100.      2200.     -4919.3485' zFar='11000' zNear='0.0001' ></OrthoViewpoint>
			<inline url="HCG16_manual.x3d" nameSpaceName="cube" mapDEFToID="true" onclick="" onload="loading()"/>
		</scene>
	</x3d></center>
	<div style="width:90%">
		<br/>
		&nbsp <b>Viewpoints:</b>
			<button onclick="document.getElementById('cubeFixed').runtime.resetView();">Reset View</button>
			<button onclick="document.getElementById('front').setAttribute('set_bind','true');"> R.A. - Dec. </button>
			<button onclick="document.getElementById('side').setAttribute('set_bind','true');"> Z - Dec. </button>
			<button onclick="document.getElementById('side2').setAttribute('set_bind','true');"> Z - R.A. </button>
			<button onclick="document.getElementById('vp0').setAttribute('set_bind','true');"> Tidal tail </button>
			<button onclick="document.getElementById('vp1').setAttribute('set_bind','true');"> HII region </button>

		<br><br>

		&nbsp <b>Labels:</b>
			<button onclick="setgrids();" >Grids</button>
			<button onclick="setaxes();" >Axes labels</button>
			<button onclick="setgals();" >Galaxies</button>
			<button onclick="setgallabels();" >Galaxy Labels</button>
			<button onclick="setimage2d();" >2D image</button>
			<button id="anim" onclick="animation()">Animation</button>		<br><br>
		&nbsp <b>Markers:</b>
			<button onclick="settube();">Tubes</button>
			<button onclick="setsphere();">Spheres</button>
			<button onclick="setbox();">Boxes</button>
			<button onclick="setcone();">Cones</button>
		<br><br>
		&nbsp <b>Cube 0 (RMS):</b>
			<button id="0but0" onclick="setHI0layer0();" style="font-size:20px ; border:5px dashed black ; background:rgb(255 255 255) ; color:black"><b>3.000</b></button>
			<button id="0but1" onclick="setHI0layer1();" style="font-size:20px ; border:5px dashed black ; background:rgb(229 224 114) ; color:black"><b>4.000</b></button>
			<button id="0but2" onclick="setHI0layer2();" style="font-size:20px ; border:5px dashed black ; background:rgb(229 174  18) ; color:black"><b>5.000</b></button>
			<button id="0but3" onclick="setHI0layer3();" style="font-size:20px ; border:5px dashed black ; background:rgb(198  56  87) ; color:white"><b>7.000</b></button>
			<button id="0but4" onclick="setHI0layer4();" style="font-size:20px ; border:5px dashed black ; background:rgb(0 0 0) ; color:white"><b>10.000</b></button>
			&nbsp <button id="all" onclick="hideall0()"><b>Invert</b></button>		<br><br>
		&nbsp <label for="cmaps-choice0"><b>Cmap 0</b> </label>
		<select id="cmaps-choice0">
			<option value="CMRmap_r">CMRmap_r</option>
			<option value="magma">magma</option>
			<option value="inferno">inferno</option>
			<option value="plasma">plasma</option>
			<option value="viridis">viridis</option>
			<option value="cividis">cividis</option>
			<option value="twilight">twilight</option>
			<option value="twilight_shifted">twilight_shifted</option>
			<option value="turbo">turbo</option>
			<option value="Blues">Blues</option>
			<option value="BrBG">BrBG</option>
			<option value="BuGn">BuGn</option>
			<option value="BuPu">BuPu</option>
			<option value="CMRmap">CMRmap</option>
			<option value="GnBu">GnBu</option>
			<option value="Greens">Greens</option>
			<option value="Greys">Greys</option>
			<option value="OrRd">OrRd</option>
			<option value="Oranges">Oranges</option>
			<option value="PRGn">PRGn</option>
			<option value="PiYG">PiYG</option>
			<option value="PuBu">PuBu</option>
			<option value="PuBuGn">PuBuGn</option>
			<option value="PuOr">PuOr</option>
			<option value="PuRd">PuRd</option>
			<option value="Purples">Purples</option>
			<option value="RdBu">RdBu</option>
			<option value="RdGy">RdGy</option>
			<option value="RdPu">RdPu</option>
			<option value="RdYlBu">RdYlBu</option>
			<option value="RdYlGn">RdYlGn</option>
			<option value="Reds">Reds</option>
			<option value="Spectral">Spectral</option>
			<option value="Wistia">Wistia</option>
			<option value="YlGn">YlGn</option>
			<option value="YlGnBu">YlGnBu</option>
			<option value="YlOrBr">YlOrBr</option>
			<option value="YlOrRd">YlOrRd</option>
			<option value="afmhot">afmhot</option>
			<option value="autumn">autumn</option>
			<option value="binary">binary</option>
			<option value="bone">bone</option>
			<option value="brg">brg</option>
			<option value="bwr">bwr</option>
			<option value="cool">cool</option>
			<option value="coolwarm">coolwarm</option>
			<option value="copper">copper</option>
			<option value="cubehelix">cubehelix</option>
			<option value="flag">flag</option>
			<option value="gist_earth">gist_earth</option>
			<option value="gist_gray">gist_gray</option>
			<option value="gist_heat">gist_heat</option>
			<option value="gist_ncar">gist_ncar</option>
			<option value="gist_rainbow">gist_rainbow</option>
			<option value="gist_stern">gist_stern</option>
			<option value="gist_yarg">gist_yarg</option>
			<option value="gnuplot">gnuplot</option>
			<option value="gnuplot2">gnuplot2</option>
			<option value="gray">gray</option>
			<option value="hot">hot</option>
			<option value="hsv">hsv</option>
			<option value="jet">jet</option>
			<option value="nipy_spectral">nipy_spectral</option>
			<option value="ocean">ocean</option>
			<option value="pink">pink</option>
			<option value="prism">prism</option>
			<option value="rainbow">rainbow</option>
			<option value="seismic">seismic</option>
			<option value="spring">spring</option>
			<option value="summer">summer</option>
			<option value="terrain">terrain</option>
			<option value="winter">winter</option>
			<option value="Accent">Accent</option>
			<option value="Dark2">Dark2</option>
			<option value="Paired">Paired</option>
			<option value="Pastel1">Pastel1</option>
			<option value="Pastel2">Pastel2</option>
			<option value="Set1">Set1</option>
			<option value="Set2">Set2</option>
			<option value="Set3">Set3</option>
			<option value="tab10">tab10</option>
			<option value="tab20">tab20</option>
			<option value="tab20b">tab20b</option>
			<option value="tab20c">tab20c</option>
			<option value="magma_r">magma_r</option>
			<option value="inferno_r">inferno_r</option>
			<option value="plasma_r">plasma_r</option>
			<option value="viridis_r">viridis_r</option>
			<option value="cividis_r">cividis_r</option>
			<option value="twilight_r">twilight_r</option>
			<option value="twilight_shifted_r">twilight_shifted_r</option>
			<option value="turbo_r">turbo_r</option>
			<option value="Blues_r">Blues_r</option>
			<option value="BrBG_r">BrBG_r</option>
			<option value="BuGn_r">BuGn_r</option>
			<option value="BuPu_r">BuPu_r</option>
			<option value="GnBu_r">GnBu_r</option>
			<option value="Greens_r">Greens_r</option>
			<option value="Greys_r">Greys_r</option>
			<option value="OrRd_r">OrRd_r</option>
			<option value="Oranges_r">Oranges_r</option>
			<option value="PRGn_r">PRGn_r</option>
			<option value="PiYG_r">PiYG_r</option>
			<option value="PuBu_r">PuBu_r</option>
			<option value="PuBuGn_r">PuBuGn_r</option>
			<option value="PuOr_r">PuOr_r</option>
			<option value="PuRd_r">PuRd_r</option>
			<option value="Purples_r">Purples_r</option>
			<option value="RdBu_r">RdBu_r</option>
			<option value="RdGy_r">RdGy_r</option>
			<option value="RdPu_r">RdPu_r</option>
			<option value="RdYlBu_r">RdYlBu_r</option>
			<option value="RdYlGn_r">RdYlGn_r</option>
			<option value="Reds_r">Reds_r</option>
			<option value="Spectral_r">Spectral_r</option>
			<option value="Wistia_r">Wistia_r</option>
			<option value="YlGn_r">YlGn_r</option>
			<option value="YlGnBu_r">YlGnBu_r</option>
			<option value="YlOrBr_r">YlOrBr_r</option>
			<option value="YlOrRd_r">YlOrRd_r</option>
			<option value="afmhot_r">afmhot_r</option>
			<option value="autumn_r">autumn_r</option>
			<option value="binary_r">binary_r</option>
			<option value="bone_r">bone_r</option>
			<option value="brg_r">brg_r</option>
			<option value="bwr_r">bwr_r</option>
			<option value="cool_r">cool_r</option>
			<option value="coolwarm_r">coolwarm_r</option>
			<option value="copper_r">copper_r</option>
			<option value="cubehelix_r">cubehelix_r</option>
			<option value="flag_r">flag_r</option>
			<option value="gist_earth_r">gist_earth_r</option>
			<option value="gist_gray_r">gist_gray_r</option>
			<option value="gist_heat_r">gist_heat_r</option>
			<option value="gist_ncar_r">gist_ncar_r</option>
			<option value="gist_rainbow_r">gist_rainbow_r</option>
			<option value="gist_stern_r">gist_stern_r</option>
			<option value="gist_yarg_r">gist_yarg_r</option>
			<option value="gnuplot_r">gnuplot_r</option>
			<option value="gnuplot2_r">gnuplot2_r</option>
			<option value="gray_r">gray_r</option>
			<option value="hot_r">hot_r</option>
			<option value="hsv_r">hsv_r</option>
			<option value="jet_r">jet_r</option>
			<option value="nipy_spectral_r">nipy_spectral_r</option>
			<option value="ocean_r">ocean_r</option>
			<option value="pink_r">pink_r</option>
			<option value="prism_r">prism_r</option>
			<option value="rainbow_r">rainbow_r</option>
			<option value="seismic_r">seismic_r</option>
			<option value="spring_r">spring_r</option>
			<option value="summer_r">summer_r</option>
			<option value="terrain_r">terrain_r</option>
			<option value="winter_r">winter_r</option>
			<option value="Accent_r">Accent_r</option>
			<option value="Dark2_r">Dark2_r</option>
			<option value="Paired_r">Paired_r</option>
			<option value="Pastel1_r">Pastel1_r</option>
			<option value="Pastel2_r">Pastel2_r</option>
			<option value="Set1_r">Set1_r</option>
			<option value="Set2_r">Set2_r</option>
			<option value="Set3_r">Set3_r</option>
			<option value="tab10_r">tab10_r</option>
			<option value="tab20_r">tab20_r</option>
			<option value="tab20b_r">tab20b_r</option>
			<option value="tab20c_r">tab20c_r</option>
		</select>
		<label for="cmaps-min0"><b>Min 0:</b> </label>
		<input id="cmaps-min0" type="number" value="3">
		<label for="cmaps-max0"><b>Max 0:</b> </label>
		<input id="cmaps-max0" type="number" value="10">
		<label for="cmaps-min0"><b>Scale 0:</b> </label>
		<select id="cmaps-scale0">
			<option value="linear" selected="selected">linear</option>
			<option value="log">log</option>
			<option value="sqrt">sqrt</option>
			<option value="power">power</option>
			<option value="asinh">asinh</option>
		</select>

		<br><br>
			&nbsp <label for="back-choice"><b>Background:</b> </label>
			<input oninput="change_background()" id="back-choice" type="color" value="#999999">
		&nbsp <label for="scalev"><b>Z scale:</b> </label>
		<input oninput="changescalev()" id="scalev" type="range" list="marker" min="0" max="5" step="0.001" value="1"/>
		<datalist id="marker">
			<option value="1"></option>
		</datalist>
			&nbsp <label for="galsize-choice"><b>Galaxy size: </b></label>
			<input oninput="change_galsize()" id="galsize-choice" type="number" min="2" max="100" value="8", step="2">
		&nbsp <label for="move2dimg"><b>2D image:</b> </label>
		<input oninput="move2d()" id="move2dimg" type="range" min="-1" max="1" step="0.0001" value="1"/>
		<b>$Z=$</b> <output id="showvalue"></output> km/s
	</div>
		<script>
			const galsize = document.querySelector('#galsize-choice');
			function change_galsize() {
				let gals = ['HCG16a', 'HCG16b', 'HCG16c', 'HCG16d', 'NCG848'];
				const gsval = galsize.value/8.;
				for (const gal of gals) {
					document.getElementById('cube__'+gal+'_sphere_tra').setAttribute('scale', gsval.toString()+' '+gsval.toString()+' '+gsval.toString());
					document.getElementById('cube__'+gal+'_fs').setAttribute('size', gsval*8);
					}
			}
		</script>
		<script>
		function setimage2d()
		{
		if(document.getElementById('cube__image2d').getAttribute('scale') != '1 1 1')
			document.getElementById('cube__image2d').setAttribute('scale', '1 1 1');
		else 
			document.getElementById('cube__image2d').setAttribute('scale', '0 0 0');
		}
		</script>
		<script>
		const inpscam2 = document.querySelector('#scalev');
		const inpmovem2 = document.querySelector('#move2dimg');
		const showval = document.querySelector('#showvalue');
		function move2d()
		{
			const sca = inpscam2.value;
			const move = inpmovem2.value;
			showval.textContent = roundTo(4217800.0+(move-1)*133*5513.42184924/2, 3);
			document.getElementById('cube__image2d').setAttribute('translation', '0 0 '+(sca*move-1)*1000);
		}
		</script>
		<script>
		const inpscasv = document.querySelector('#scalev');
		const inpmovesv = document.querySelector('#move2dimg');
		function changescalev()
		 {
			const sca = inpscasv.value;
			const move = inpmovesv.value;
				document.getElementById('cube__image2d').setAttribute('translation', '0 0 '+(sca*move-1)*1000);
			document.getElementById('cube__0lt0_sp0').setAttribute('scale', '1 1 '+sca);
			document.getElementById('cube__0lt1_sp0').setAttribute('scale', '1 1 '+sca);
			document.getElementById('cube__0lt2_sp0').setAttribute('scale', '1 1 '+sca);
			document.getElementById('cube__0lt3_sp0').setAttribute('scale', '1 1 '+sca);
			document.getElementById('cube__0lt4_sp0').setAttribute('scale', '1 1 '+sca);
			document.getElementById('cube__ot').setAttribute('scale', '1 1 '+sca);
			document.getElementById('cube__HCG16a_sphere_tra').setAttribute('translation', '-656.144462464198 509.02857142755875 '+sca*-12.000789227284788);
			document.getElementById('cube__glt0').setAttribute('translation', '-656.144462464198 509.02857142755875 '+sca*-12.000789227284788);
			document.getElementById('cube__HCG16b_sphere_tra').setAttribute('translation', '-730.12477421275 525.199999998962 '+sca*7.09137545248607);
			document.getElementById('cube__glt1').setAttribute('translation', '-730.12477421275 525.199999998962 '+sca*7.09137545248607);
			document.getElementById('cube__HCG16c_sphere_tra').setAttribute('translation', '-382.27095355968584 447.48571428483 '+sca*-6.545885033064542);
			document.getElementById('cube__glt2').setAttribute('translation', '-382.27095355968584 447.48571428483 '+sca*-6.545885033064542);
			document.getElementById('cube__HCG16d_sphere_tra').setAttribute('translation', '-295.6851898412055 233.77142857097246 '+sca*61.64041739468851);
			document.getElementById('cube__glt3').setAttribute('translation', '-295.6851898412055 233.77142857097246 '+sca*61.64041739468851);
			document.getElementById('cube__NCG848_sphere_tra').setAttribute('translation', '387.2281537725722 -551.1428571417493 '+sca*375.2974085623526);
			document.getElementById('cube__glt4').setAttribute('translation', '387.2281537725722 -551.1428571417493 '+sca*375.2974085623526);
			 document.getElementById('cube__tlt').setAttribute('scale', '1 1 '+sca);
	if (document.getElementById('new-sphere')[0].value != 'none') {
		for (s=0; s<document.getElementById('new-sphere').length; s++) {
			const sphInd = document.getElementById('new-sphere')[s].value.slice(3);
			document.getElementById('sphtra'+sphInd).setAttribute('translation', sph_coords[sphInd-1][0]+' '+sph_coords[sphInd-1][1]+' '+sca*sph_coords[sphInd-1][2]);
		}
	}
	if (document.getElementById('new-box')[0].value != 'none') {
		for (s=0; s<document.getElementById('new-box').length; s++) {
			const boxInd = document.getElementById('new-box')[s].value.slice(3);
			document.getElementById('boxtra'+boxInd).setAttribute('translation', box_coords[boxInd-1][0]+' '+box_coords[boxInd-1][1]+' '+sca*box_coords[boxInd-1][2]);
		}
	}
	if (document.getElementById('new-con')[0].value != 'none') {
		for (s=0; s<document.getElementById('new-con').length; s++) {
			const conInd = document.getElementById('new-con')[s].value.slice(3);
			document.getElementById('contra'+conInd).setAttribute('translation', con_coords[conInd-1][0]+' '+con_coords[conInd-1][1]+' '+sca*con_coords[conInd-1][2]);
			// missing orientation change (don't implement?)
		}
	}
	if (document.getElementById('new-tub')[0].value != 'none') {
		for (s=0; s<document.getElementById('new-tub').length; s++) {
			const tubInd = document.getElementById('new-tub')[s].value.slice(3);
			for (i=1; i<tubelen[tubInd-1]; i++) {
				document.getElementById('tubtra'+tubInd+'_'+i).setAttribute('translation', tub_coords[tubInd-1][i-1][0][0]+' '+tub_coords[tubInd-1][i-1][0][1]+' '+sca*tub_coords[tubInd-1][i-1][0][2]);
				const norm = Math.sqrt(tub_coords[tubInd-1][i-1][1][0]**2+tub_coords[tubInd-1][i-1][1][1]**2+(tub_coords[tubInd-1][i-1][1][2]*sca)**2)*1.015;
				const angle = Math.acos(tub_coords[tubInd-1][i-1][1][1]/norm);
				document.getElementById('tubtra'+tubInd+'_'+i).setAttribute('rotation', tub_coords[tubInd-1][i-1][1][2]*sca+' 0 '+(-tub_coords[tubInd-1][i-1][1][0])+' '+angle);
				document.getElementById('tub'+tubInd+'_'+i).setAttribute('height', norm);
			}
		}
	}
		document.getElementById('cube__pysph0tra').setAttribute('translation', '679.1999999986446 428.5714285705775 '+sca*85.64199584925785);
		document.getElementById('cube__pysph1tra').setAttribute('translation', '199.19999999959776 -1285.7142857117021 '+sca*-159.82869289065317);
		document.getElementById('cube__pybox0tra').setAttribute('translation', '439.19999999913824 142.8571428568693 '+sca*-678.0445913415764);
		document.getElementById('cube__pybox1tra').setAttribute('translation', '-520.7999999989554 -999.9999999979938 '+sca*-132.55417191955195);
		document.getElementById('cube__pycon0tra').setAttribute('translation', '-40.79999999990858 -428.5714285705673 '+sca*-268.92677677505804);
		document.getElementById('cube__pycon1tra').setAttribute('translation', '-1000.7999999980022 714.2857142842959 '+sca*-541.6719864860703);
		const diff0_0 = [-959.9999999980937,-571.4285714274265,-545.4904194220245];
		const height0_0 = Math.sqrt(diff0_0[0]**2+diff0_0[1]**2+(sca*diff0_0[2])**2)*1.015;
		const angle0_0 = Math.acos(diff0_0[1]/height0_0);
		document.getElementById('cube__pytub0tra0').setAttribute('translation', '-40.79999999990858 428.5714285705826 '+sca*-268.92677677505804);
		document.getElementById('cube__py0tub0').setAttribute('height', height0_0.toString());
		document.getElementById('cube__pytub0tra0').setAttribute('rotation', sca*diff0_0[2]+' 0 '+(-diff0_0[0])+' '+angle0_0);
		const diff1_0 = [-959.9999999980937,-571.4285714274265,-272.74520971101225];
		const height1_0 = Math.sqrt(diff1_0[0]**2+diff1_0[1]**2+(sca*diff1_0[2])**2)*1.015;
		const angle1_0 = Math.acos(diff1_0[1]/height1_0);
		document.getElementById('cube__pytub1tra0').setAttribute('translation', '-520.7999999989554 -714.2857142842805 '+sca*-268.9267767750581);
		document.getElementById('cube__py1tub0').setAttribute('height', height1_0.toString());
		document.getElementById('cube__pytub1tra0').setAttribute('rotation', sca*diff1_0[2]+' 0 '+(-diff1_0[0])+' '+angle1_0);
		const diff1_1 = [1439.9999999971405,1142.857142854863,-272.7452097110122];
		const height1_1 = Math.sqrt(diff1_1[0]**2+diff1_1[1]**2+(sca*diff1_1[2])**2)*1.015;
		const angle1_1 = Math.acos(diff1_1[1]/height1_1);
		document.getElementById('cube__pytub1tra1').setAttribute('translation', '-280.799999999432 -428.57142857056226 '+sca*-541.6719864860703);
		document.getElementById('cube__py1tub1').setAttribute('height', height1_1.toString());
		document.getElementById('cube__pytub1tra1').setAttribute('rotation', sca*diff1_1[2]+' 0 '+(-diff1_1[0])+' '+angle1_1);
			document.getElementById('cube__alt_diff0').setAttribute('translation', '0.0 -1100.0 '+sca*-1000.0);
			document.getElementById('cube__alt_real0').setAttribute('translation', '0.0 -1100.0 '+sca*-1000.0);
			document.getElementById('cube__att_diff0').setAttribute('translation', '1000.0 -1100.0 '+sca*-1000.0);
			document.getElementById('cube__att_real0').setAttribute('translation', '1000.0 -1100.0 '+sca*-1000.0);
			document.getElementById('cube__alt_diff1').setAttribute('translation', '1100.0 0.0 '+sca*-1000.0);
			document.getElementById('cube__alt_real1').setAttribute('translation', '1100.0 0.0 '+sca*-1000.0);
			document.getElementById('cube__att_diff1').setAttribute('translation', '-1000.0 -1100.0 '+sca*-1000.0);
			document.getElementById('cube__att_real1').setAttribute('translation', '-1000.0 -1100.0 '+sca*-1000.0);
			document.getElementById('cube__alt_diff2').setAttribute('translation', '-1000.0 -1100.0 '+sca*0.0);
			document.getElementById('cube__alt_real2').setAttribute('translation', '-1000.0 -1100.0 '+sca*0.0);
			document.getElementById('cube__att_diff2').setAttribute('translation', '1100.0 1000.0 '+sca*-1000.0);
			document.getElementById('cube__att_real2').setAttribute('translation', '1100.0 1000.0 '+sca*-1000.0);
			document.getElementById('cube__alt_diff3').setAttribute('translation', '-1000.0 0.0 '+sca*-1100.0);
			document.getElementById('cube__alt_real3').setAttribute('translation', '-1000.0 0.0 '+sca*-1100.0);
			document.getElementById('cube__att_diff3').setAttribute('translation', '1100.0 -1000.0 '+sca*-1000.0);
			document.getElementById('cube__att_real3').setAttribute('translation', '1100.0 -1000.0 '+sca*-1000.0);
			document.getElementById('cube__alt_diff4').setAttribute('translation', '-1100.0 1000.0 '+sca*0.0);
			document.getElementById('cube__alt_real4').setAttribute('translation', '-1100.0 1000.0 '+sca*0.0);
			document.getElementById('cube__att_diff4').setAttribute('translation', '-1000.0 -1100.0 '+sca*-1000.0);
			document.getElementById('cube__att_real4').setAttribute('translation', '-1000.0 -1100.0 '+sca*-1000.0);
			document.getElementById('cube__alt_diff5').setAttribute('translation', '0.0 1000.0 '+sca*-1100.0);
			document.getElementById('cube__alt_real5').setAttribute('translation', '0.0 1000.0 '+sca*-1100.0);
			document.getElementById('cube__att_diff5').setAttribute('translation', '-1000.0 -1100.0 '+sca*1000.0);
			document.getElementById('cube__att_real5').setAttribute('translation', '-1000.0 -1100.0 '+sca*1000.0);
			document.getElementById('cube__att_diff6').setAttribute('translation', '-1000.0 1000.0 '+sca*-1100.0);
			document.getElementById('cube__att_real6').setAttribute('translation', '-1000.0 1000.0 '+sca*-1100.0);
			document.getElementById('cube__att_diff7').setAttribute('translation', '-1000.0 -1000.0 '+sca*-1100.0);
			document.getElementById('cube__att_real7').setAttribute('translation', '-1000.0 -1000.0 '+sca*-1100.0);
			document.getElementById('cube__att_diff8').setAttribute('translation', '-1100.0 1000.0 '+sca*-1000.0);
			document.getElementById('cube__att_real8').setAttribute('translation', '-1100.0 1000.0 '+sca*-1000.0);
			document.getElementById('cube__att_diff9').setAttribute('translation', '-1100.0 1000.0 '+sca*1000.0);
			document.getElementById('cube__att_real9').setAttribute('translation', '-1100.0 1000.0 '+sca*1000.0);
			document.getElementById('cube__att_diff10').setAttribute('translation', '1000.0 1000.0 '+sca*-1100.0);
			document.getElementById('cube__att_real10').setAttribute('translation', '1000.0 1000.0 '+sca*-1100.0);
			document.getElementById('cube__att_diff11').setAttribute('translation', '-1000.0 1000.0 '+sca*-1100.0);
			document.getElementById('cube__att_real11').setAttribute('translation', '-1000.0 1000.0 '+sca*-1100.0);
		}
		</script>
		
		<div id="divmaster" style="margin-left: 2%">
			<br>
			<!-- BUTTON TO CHANGE LAYOUT -->
			<label for="markers-choice"><b>Markers:</b> </label>
			<select id="markers-choice">
				<option value="none">None</option>
				<option value="sphere">Sphere</option>
				<option value="box">Box</option>
				<option value="tub">Tube</option>
				<option value="con">Cone</option>
			</select>
			<input type="color" id="butcol" value="#ff0000">
			<button id="butnew" onclick="newmarker()">New</button>
			<button id="butcreate" onclick="createmarker()">Create</button>
			<button id="butremove" onclick="removemarker()">Remove</button> <br><br>
		</div>
		<!-- create various layouts for different objects -->
		<div id="spherediv" style="display:none ; margin-left: 2%">
			<select id="new-sphere">
				<option value="none">None</option>
			</select>
			<br>
		</div>
		<div id="boxdiv" style="display:none ; margin-left: 2%">
			<select id="new-box">
				<option value="none">None</option>
			</select>
			<br>
		</div>
		<div id="condiv" style="display:none ; margin-left: 2%">
			<select id="new-con">
				<option value="none">None</option>
			</select>
			<br>
		</div>
		<div id="tubdiv" style="display:none ; margin-left: 2%">
			<select id="new-tub">
				<option value="none">None</option>
			</select>
			<button id="addpoint" onclick="addpoint(seltub, tubelen)">Add point</button>
			<br>
		</div>
		<script type="text/javascript">
			// General parameters
			const marktype = document.querySelector('#markers-choice');
			marktype.addEventListener('change', newlayout);
			const sscasv = document.querySelector('#scalev');
			const col = document.querySelector('#butcol');

			// Spheres
			var nspheres = 0; //number of spheres
			var sph_coords = []; //coordinates of sphere

			const selsph = document.querySelector('#new-sphere');
			selsph.addEventListener('change', changeSphere);

			// Boxes
			var nboxes = 0; //number of boxes
			var box_coords = []; //coordinates of boxes

			const selbox = document.querySelector('#new-box');
			selbox.addEventListener('change', changeBox);

			// Cones
			var ncones = 0; //number of cones
			var con_coords = []; //coordinates of cones

			const selcon = document.querySelector('#new-con');
			selcon.addEventListener('change', changeCon);

			// Tubes
			var ntubes = 0; //number of tubes
			var tub_coords = []; //coordinates of tubes
			var tubelen = []; //lengths of tubes in number of cylinders

			const seltub = document.querySelector('#new-tub');
			seltub.addEventListener('change', changeTub);

			// General
			function newmarker() {
				if (marktype.value == 'sphere') {
					nspheres = nspheres += 1;
					nspheres = newSphere(nspheres, selsph);
				} else if (marktype.value == 'box') {
					nboxes = nboxes += 1;
					nboxes = newBox(nboxes, selbox);
				} else if (marktype.value == 'tub') {
					ntubes = ntubes += 1;
					ntubes, tubelen = newTub(ntubes, seltub, tubelen);
				} else if (marktype.value == 'con') {
					ncones = ncones += 1;
					ncones = newCon(ncones, selcon);
			}
		}

			function createmarker() {
				const sca = inpscasv.value;

				const means = [32.4915, -10.225000000000001, 3851400.0];
				const delt = [0.0016680000000000063, 0.001666666666666665, 5509.774436090225];
				const trans = [8.0, 9.523809523809524, 15.037593984962406];
				if (marktype.value == 'sphere') {
					sph_coords = createSphere(sca, selsph, col, sph_coords, means, delt, trans);
				} else if (marktype.value == 'box') {
					box_coords = createBox(sca, selbox, col, box_coords, means, delt, trans);
				} else if (marktype.value == 'tub') {
					tub_coords = createTub(sca, seltub, col, tub_coords, tubelen, means, delt, trans);
				} else if (marktype.value == 'con') {
					con_coords = createCon(sca, selcon, col, con_coords, means, delt, trans);
			}
		}

			function removemarker() {
				if (marktype.value == 'sphere') {
					removeSphere(selsph);
				} else if (marktype.value == 'box') {
					removeBox(selbox);
				} else if (marktype.value == 'tub') {
					removeTub(seltub, tubelen);
				} else if (marktype.value == 'con') {
					removeCon(selcon);
			}
		}
		</script>
			<script>
				function hex2Rgb(hex) {
					var result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
					var r = parseInt(result[1], 16)/255.;
					var g = parseInt(result[2], 16)/255.;
					var b = parseInt(result[3], 16)/255.;
					return r.toString()+' '+g.toString()+' '+b.toString()
				}
				const background = document.querySelector('#back-choice');
				function change_background() {
					const backCol = background.value; 
					document.getElementById('cube__back').setAttribute('skyColor', hex2Rgb(backCol));
				}
			</script>
		 <!--MUST BE BELOW THE <select> ELEMENT-->
		<script>
			const cc0 = document.querySelector('#cmaps-choice0');
			cc0.addEventListener('change', change_colormap0);
			const cmapmin0 = document.querySelector('#cmaps-min0');
			cmapmin0.addEventListener('change', change_colormap0);
			const cmapmax0 = document.querySelector('#cmaps-max0');
			cmapmax0.addEventListener('change', change_colormap0);
			const cmapscale0 = document.querySelector('#cmaps-scale0');
			cmapscale0.addEventListener('change', change_colormap0);
			const isolevels0 = [3, 4, 5, 7, 10];
			function change_colormap0() {
				var cmap0 = cc0.value;
				var min0 = cmapmin0.value;
				var max0 = cmapmax0.value;
				const scale0 = cmapscale0.value;
				var reverse0 = false;
				var collevs0 = [];
				if (scale0 === 'linear') {
					for (const level of isolevels0) {
						collevs0.push(level);
					}
				}
				else if (scale0 === 'log') {
					min0 = Math.log(min0);
					max0 = Math.log(max0);
					for (const level of isolevels0) {
						collevs0.push(Math.log(level));
					}
				}
				else if (scale0 === 'sqrt') {
					min0 = Math.sqrt(min0);
					max0 = Math.sqrt(max0);
					for (const level of isolevels0) {
						collevs0.push(Math.sqrt(level));
					}
				}
				else if (scale0 === 'power') {
					min0 = Math.pow(min0, 2);
					max0 = Math.pow(max0, 2);
					for (const level of isolevels0) {
						collevs0.push(Math.pow(level, 2));
					}
				}
				else if (scale0 === 'asinh') {
					min0 = Math.asinh(min0);
					max0 = Math.asinh(max0);
					for (const level of isolevels0) {
						collevs0.push(Math.asinh(level));
					}
				}
				for (let lev = 0; lev < isolevels0.length; lev++) {
					if (min0 >= collevs0[lev]) {
						collevs0[lev] = 0;
					} else if (max0 <= collevs0[lev]) {
						collevs0[lev] = 1;
					} else {
						collevs0[lev] = (collevs0[lev] - min0) / (max0 - min0);
					}
					if (cmap0.endsWith('_r')) {
						reverse0 = true
					}
					if (cmap0.includes('gist_rainbow')) {
						var color0 = evaluate_cmap(collevs0[lev], 'gist_rainbow', reverse0);
					} else {
						var color0 = evaluate_cmap(collevs0[lev], cmap0.replace('_r', ''), reverse0);
					}
					var split0 = [1, 1, 1, 1, 1];
					for (let sp = 0; sp < split0[lev]; sp++) {
						document.getElementById('cube__0layer'+lev+'_sp'+sp).setAttribute('diffuseColor', color0[0]/255+' '+color0[1]/255+' '+color0[2]/255);
					}
					document.getElementById('0but'+lev).style.background = 'rgb('+color0[0]+' '+color0[1]+' '+color0[2]+')';
					if ((color0[0]*0.299 + color0[1]*0.587 + color0[2]*0.114) > 130) {
						document.getElementById('0but'+lev).style.color = 'black';
					} else {
						document.getElementById('0but'+lev).style.color = 'white';
					}
				}
			}
		</script>

<!--A table with navigation info for X3DOM-->
<br/>
<hr>
<h3><b>Navigation:</b></h3>
<table style="border-collapse: collapse; border: 2px solid rgb(0,0,0);">
<tbody><tr style="background-color: rgb(220,220,220); border: 1px solid rgb(0,0,0);">
<th width="250px">Function</th>
<th>Mouse Button</th>
</tr>
</tbody><tbody>
<tr style="background-color: rgb(240,240,240);"><td>Rotate</td>
<td>Left / Left + Shift</td>
</tr>
<tr><td>Pan</td>
<td>Mid / Left + Ctrl</td>
</tr>
<tr style="background-color: rgb(240,240,240);"><td>Zoom</td>
<td>Right / Wheel / Left + Alt</td>
</tr>
<tr><td>Set center of rotation</td>
<td>Double-click left</td>
</tr>
</tbody>
</table>
<p>Zooming with the mouse wheel is not as smooth as with the right mouse button or with Alt + Left.<p>
	</body>
</html>